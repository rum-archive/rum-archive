<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/main.css" />
  <script src="/js/main.js"></script>
  <title>RUM Archive - RUM Archive Third-Party Resource Data</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#006a80">
  <meta name="msapplication-TileColor" content="#006a80">
  <meta name="theme-color" content="#006a80">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="RUM Archive - RUM Archive Third-Party Resource Data">
  <meta property="og:image" content="https://rumarchive.com/assets/rum-archive-banner-facebook-1200x630.png">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="rumarchive.com">
  <meta name="twitter:title" content="RUM Archive - RUM Archive Third-Party Resource Data">
  <meta name="twitter:image" content="https://rumarchive.com/assets/rum-archive-banner-twitter-1600x900.png">
  <script>(function(){if(window.BOOMR&&(window.BOOMR.version||window.BOOMR.snippetExecuted)){return}window.BOOMR=window.BOOMR||{};window.BOOMR.snippetStart=(new Date).getTime();window.BOOMR.snippetExecuted=true;window.BOOMR.snippetVersion=15;window.BOOMR.url="//c.go-mpulse.net/boomerang/S4RHZ-UABWM-G9DGN-GKRY7-DUGEG";var e=document.currentScript||document.getElementsByTagName("script")[0],a=e.parentNode,s=false,t=3e3;function n(){if(s){return}var e=document.createElement("script");e.id="boomr-scr-as";e.src=window.BOOMR.url;e.async=true;a.appendChild(e);s=true}function i(e){s=true;var t,i=document,n,o,d,r=window;window.BOOMR.snippetMethod=e?"if":"i";n=function(e,t){var n=i.createElement("script");n.id=t||"boomr-if-as";n.src=window.BOOMR.url;BOOMR_lstart=(new Date).getTime();e=e||i.body;e.appendChild(n)};if(!window.addEventListener&&window.attachEvent&&navigator.userAgent.match(/MSIE [678]\./)){window.BOOMR.snippetMethod="s";n(a,"boomr-async");return}o=document.createElement("IFRAME");o.src="about:blank";o.title="";o.role="presentation";o.loading="eager";d=(o.frameElement||o).style;d.width=0;d.height=0;d.border=0;d.display="none";a.appendChild(o);try{r=o.contentWindow;i=r.document.open()}catch(e){t=document.domain;o.src="javascript:var d=document.open();d.domain='"+t+"';void 0;";r=o.contentWindow;i=r.document.open()}r._boomrl=function(){n()};if(r.addEventListener){r.addEventListener("load",r._boomrl,false)}else if(r.attachEvent){r.attachEvent("onload",r._boomrl)}i.close()}var o=document.createElement("link");if(o.relList&&typeof o.relList.supports==="function"&&o.relList.supports("preload")&&"as"in o){window.BOOMR.snippetMethod="p";o.href=window.BOOMR.url;o.rel="preload";o.as="script";o.addEventListener("load",n);o.addEventListener("error",function(){i(true)});setTimeout(function(){if(!s){i(true)}},t);BOOMR_lstart=(new Date).getTime();a.appendChild(o)}else{i(false)}function d(e){window.BOOMR_onload=e&&e.timeStamp||(new Date).getTime()}if(window.addEventListener){window.addEventListener("load",d,false)}else if(window.attachEvent){window.attachEvent("onload",d)}})();</script>
</head>
<body>
  <header><nav class="navbar is-light" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/assets/rum-archive-logo-square.svg" width="28" height="28" />
    </a>

    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbar-main">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbar-main" class="navbar-menu">
    <div class="navbar-start">
      <div class="navbar-item has-text-weight-bold">
        <a href="/">RUM Archive</a>
      </div>
    </div>

    <div class="navbar-end">
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/docs/">
          Documentation
        </a>

        <div class="navbar-dropdown">
          <a class="navbar-item" href="/docs/methodology">
            Methodology
          </a>
          <a class="navbar-item" href="/docs/querying">
            Querying
          </a>
          <a class="navbar-item" href="/docs/tables">
            Tables
          </a>
          <a class="navbar-item" href="/docs/samples">
            Samples
          </a>
          <a class="navbar-item" href="/docs/tips">
            Tips
          </a>
          <a class="navbar-item" href="/docs/release-notes">
            Release  Notes
          </a>
        </div>
      </div>

      <a href="/datasets" class="navbar-item">
        Datasets
      </a>

      <a href="/blog" class="navbar-item">
        Blog
      </a>

      <a href="/insights" class="navbar-item">
        Insights
      </a>

      <a href="/contribute" class="navbar-item">
        Contribute!
      </a>

      <a href="https://github.com/rum-archive/rum-archive" class="navbar-item">
        Github
      </a>

      <a href="/about" class="navbar-item">
        About
      </a>
    </div>
  </div>
</nav>
</header>
  <main>
    
<article class="page-layout">
  <div class="container">
    <div class="columns">
      <div class="column is-10 is-offset-1">
        <div class="content m-5">
          <h1>RUM Archive Third-Party Resource Data</h1>
          <p class="is-italic">By Nic Jansma on <time class="" datetime="2023-11-01">01 Nov 2023</time></p>
          
            <h2>Table of Contents</h2>
            <aside>
              <div class="toc" >
        <ul><li><a href="#example-queries">Example Queries</a></li><li><a href="#what-urls-are-included">What URLs are included</a></li><li><a href="#caveats">Caveats</a></li><li><a href="#feedback-welcome">Feedback Welcome</a></li></ul>
      </div>
            </aside>
            <hr />
          
          <p>We're excited to announce a <strong>preview</strong> of a new type of data available in the RUM Archive: <strong>Third-Party Resources</strong></p>
<p>At mPulse, we are using <a href="https://github.com/akamai/boomerang">boomerang.js</a> to capture RUM data.  Boomerang uses the <a href="https://www.w3.org/TR/resource-timing/">ResourceTiming API</a> to gather data about all of the sub-resource fetches on the page (such as JavaScript, CSS, images, etc) for every <a href="https://techdocs.akamai.com/mpulse-boomerang/docs/whats-in-an-mpulse-beacon">Page Load beacon</a>.  This data is compressed and beaconed to mPulse for analytics purposes.</p>
<p>From this data, viewed in aggregate across all of our customers, we can easily spot common third-party components such as:</p>
<ul>
<li>Tag Managers (Google Tag Manager, GTag)</li>
<li>Analytics (Google Analytics, mPulse)</li>
<li>Widgets (Pinterest, Twitter, Bazaar Voice, Youtube)</li>
<li>Fonts (Google Fonts)</li>
<li>Beacons (Meta Pixel, mPulse, Google Analytics, Doubleclick)</li>
<li>Ads (Google, Amazon, Criteo)</li>
<li>Libraries: (jQuery)</li>
</ul>
<p>For this new table, we're going to begin exporting the Top 500+ third-party resources we see each day, similar to how we share Page Load data.  Each third-party resource URL will have information on its <a href="/docs/tables/#third-party-resources">popularity, performance and size</a>.  These URL trends should be trackable over time as well.</p>
<h2 id="example-queries" tabindex="-1">Example Queries</h2>
<p>Let's look at some example queries for how you can use this data.</p>
<p>It's easy to view the most popular third-party URLs by day.  For example, here are the Top 10 third-party URLs on 2023-10-15:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>  URL<span class="token punctuation">,</span><br>        <span class="token function">SUM</span><span class="token punctuation">(</span>FETCHES<span class="token punctuation">)</span> <span class="token keyword">AS</span> FETCHES<br><span class="token keyword">FROM</span>    akamai<span class="token operator">-</span>mpulse<span class="token operator">-</span>rumarchive<span class="token punctuation">.</span>rumarchive<span class="token punctuation">.</span>rumarchive_resources<br><span class="token keyword">WHERE</span>   <span class="token keyword">DATE</span> <span class="token operator">=</span> <span class="token string">'2023-10-15'</span><br><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> URL<br><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">SUM</span><span class="token punctuation">(</span>FETCHES<span class="token punctuation">)</span> <span class="token keyword">DESC</span><br><span class="token keyword">LIMIT</span> <span class="token number">10</span></code></pre>
<table>
<thead>
<tr>
<th style="text-align:right">Rank</th>
<th>URL</th>
<th style="text-align:right">FETCHES</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td><code>https://www.googletagmanager.com/gtag/js</code></td>
<td style="text-align:right">14,191,855</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td><code>https://www.googletagmanager.com/gtm.js</code></td>
<td style="text-align:right">9,077,607</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td><code>https://www.facebook.com/tr/</code></td>
<td style="text-align:right">7,848,302</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td><code>https://www.google-analytics.com/j/collect</code></td>
<td style="text-align:right">7,835,923</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td><code>https://www.google-analytics.com/collect</code></td>
<td style="text-align:right">6,579,589</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td><code>https://www.google-analytics.com/analytics.js</code></td>
<td style="text-align:right">4,645,448</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td><code>https://stats.g.doubleclick.net/j/collect</code></td>
<td style="text-align:right">3,755,276</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td><code>https://analytics.google.com/g/collect</code></td>
<td style="text-align:right">3,296,602</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td><code>https://c.go-mpulse.net/api/config.json</code></td>
<td style="text-align:right">2,673,639</td>
</tr>
<tr>
<td style="text-align:right">10</td>
<td><code>https://securepubads.g.doubleclick.net/pcs/view</code></td>
<td style="text-align:right">2,544,007</td>
</tr>
</tbody>
</table>
<p>Each URL has multiple <a href="/docs/tables/#dimensions-1">dimensions</a> associated with it, such as:</p>
<ul>
<li><code>DEVICETYPE</code></li>
<li><code>USERAGENTFAMILY</code> and <code>USERAGENTVERSION</code></li>
<li><code>DEVICEMODEL</code></li>
<li><code>OS</code> and <code>OSVERSION</code></li>
<li><code>BEACONTYPE</code></li>
<li><code>COUNTRY</code></li>
<li><code>PROTOCOL</code></li>
<li><code>INITIATORTYPE</code></li>
<li><code>ASSETTYPE</code></li>
</ul>
<p>Let's look at one of those dimensions. <a href="https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/initiatorType">initiatorTypes</a> reflects what DOM element triggered the resource fetch.  Here are all of the <code>initiatorTypes</code> for these third-party resource URLs in our data, ordered by popularity:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>  INITIATORTYPE<span class="token punctuation">,</span><br>        <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> CNT<br><span class="token keyword">FROM</span>    akamai<span class="token operator">-</span>mpulse<span class="token operator">-</span>rumarchive<span class="token punctuation">.</span>rumarchive<span class="token punctuation">.</span>rumarchive_resources<br><span class="token keyword">WHERE</span>   <span class="token keyword">DATE</span> <span class="token operator">=</span> <span class="token string">'2023-10-15'</span><br><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> INITIATORTYPE<br><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> CNT <span class="token keyword">DESC</span></code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">INITIATORTYPE</th>
<th style="text-align:right">CNT</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>img</code></td>
<td style="text-align:right">421,072</td>
</tr>
<tr>
<td style="text-align:left"><code>script</code></td>
<td style="text-align:right">283,536</td>
</tr>
<tr>
<td style="text-align:left"><code>xmlhttprequest</code></td>
<td style="text-align:right">184,936</td>
</tr>
<tr>
<td style="text-align:left"><code>beacon</code></td>
<td style="text-align:right">76,421</td>
</tr>
<tr>
<td style="text-align:left"><code>fetch</code></td>
<td style="text-align:right">68,216</td>
</tr>
<tr>
<td style="text-align:left"><code>iframe</code></td>
<td style="text-align:right">59,296</td>
</tr>
<tr>
<td style="text-align:left"><code>other</code></td>
<td style="text-align:right">42,581</td>
</tr>
<tr>
<td style="text-align:left"><code>link</code></td>
<td style="text-align:right">16,156</td>
</tr>
<tr>
<td style="text-align:left"><code>css</code></td>
<td style="text-align:right">10,844</td>
</tr>
<tr>
<td style="text-align:left">(null)</td>
<td style="text-align:right">565</td>
</tr>
</tbody>
</table>
<p>You can split, filter and group by other dimensions as well.  For example, let's look at how Google's GTag's median total time (<code>TOTALHISTOGRAM</code>) and download time (<code>DOWNLOADHISTOGRAM</code>) changes by country (<code>GROUP BY COUNTRY</code>) on mobile (<code>DEVICETYPE=Mobile</code>) devices:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>  COUNTRY<span class="token punctuation">,</span><br>        <span class="token function">SUM</span><span class="token punctuation">(</span>FETCHES<span class="token punctuation">)</span> <span class="token keyword">AS</span> FETCHES<span class="token punctuation">,</span><br>        <span class="token identifier"><span class="token punctuation">`</span>akamai-mpulse-rumarchive.rumarchive.PERCENTILE_APPROX<span class="token punctuation">`</span></span><span class="token punctuation">(</span><br>          ARRAY_AGG<span class="token punctuation">(</span>TOTALHISTOGRAM<span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">[</span><span class="token number">0.50</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>          <span class="token number">10</span><span class="token punctuation">,</span><br>          <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">as</span> TOTAL_MEDIAN<span class="token punctuation">,</span><br>        <span class="token identifier"><span class="token punctuation">`</span>akamai-mpulse-rumarchive.rumarchive.PERCENTILE_APPROX<span class="token punctuation">`</span></span><span class="token punctuation">(</span><br>          ARRAY_AGG<span class="token punctuation">(</span>DOWNLOADHISTOGRAM<span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">[</span><span class="token number">0.50</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>          <span class="token number">10</span><span class="token punctuation">,</span><br>          <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">as</span> DOWNLOAD_MEDIAN<span class="token punctuation">,</span><br><span class="token keyword">FROM</span>    <span class="token identifier"><span class="token punctuation">`</span>akamai-mpulse-rumarchive.rumarchive.rumarchive_resources<span class="token punctuation">`</span></span><br><span class="token keyword">WHERE</span>   <span class="token keyword">DATE</span> <span class="token operator">=</span> <span class="token string">'2023-10-15'</span><br>  <span class="token operator">AND</span>   DEVICETYPE <span class="token operator">=</span> <span class="token string">'Mobile'</span><br>  <span class="token operator">AND</span>   URL <span class="token operator">=</span> <span class="token string">'https://www.googletagmanager.com/gtag/js'</span><br><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> COUNTRY<br><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> FETCHES <span class="token keyword">DESC</span><br><span class="token keyword">LIMIT</span> <span class="token number">10</span></code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">COUNTRY</th>
<th style="text-align:right">FETCHES</th>
<th style="text-align:right">TOTAL_MEDIAN</th>
<th style="text-align:right">DOWNLOAD_MEDIAN</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">US</td>
<td style="text-align:right">3,936,631</td>
<td style="text-align:right">112</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:left">IN</td>
<td style="text-align:right">723,496</td>
<td style="text-align:right">362</td>
<td style="text-align:right">158</td>
</tr>
<tr>
<td style="text-align:left">JP</td>
<td style="text-align:right">536,711</td>
<td style="text-align:right">131</td>
<td style="text-align:right">87</td>
</tr>
<tr>
<td style="text-align:left">GB</td>
<td style="text-align:right">404,121</td>
<td style="text-align:right">72</td>
<td style="text-align:right">7</td>
</tr>
<tr>
<td style="text-align:left">CA</td>
<td style="text-align:right">289,541</td>
<td style="text-align:right">117</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:left">IT</td>
<td style="text-align:right">184,021</td>
<td style="text-align:right">96</td>
<td style="text-align:right">128</td>
</tr>
<tr>
<td style="text-align:left">BR</td>
<td style="text-align:right">181,061</td>
<td style="text-align:right">243</td>
<td style="text-align:right">157</td>
</tr>
<tr>
<td style="text-align:left">DE</td>
<td style="text-align:right">179,368</td>
<td style="text-align:right">81</td>
<td style="text-align:right">7</td>
</tr>
<tr>
<td style="text-align:left">FR</td>
<td style="text-align:right">171,739</td>
<td style="text-align:right">79</td>
<td style="text-align:right">7</td>
</tr>
<tr>
<td style="text-align:left">MX</td>
<td style="text-align:right">165,870</td>
<td style="text-align:right">213</td>
<td style="text-align:right">335</td>
</tr>
</tbody>
</table>
<h2 id="what-urls-are-included" tabindex="-1">What URLs are included</h2>
<p>Our goal is to share data about the top third-party resource URLs seen across the web.   To start, we plan on sharing the 500+ most popular third-party URLs on a daily basis.</p>
<p>We only consider a URL as being a third-party URL if it shows up in at least 10 <em>different</em> mPulse customer accounts.  We are also reviewing (allowlist-ing) all URLs to ensure they don't contain any customer-specific information.</p>
<p>All URLs have their query string removed, so no sensitive data is shared.</p>
<p>Once a URL makes it into the allowlist, we will continue querying for it even if it drops out of the top 500.  This means the list of URLs will grow slowly over time.</p>
<p>Some URLs share a common pattern with minor differences, such as the <code>.cc</code> country code or a <code>v1.0.0</code> version number.  Where possible, we'll assign a wildcard <code>URLGROUP</code> pattern to these URLs so they can all be tracked as a group.</p>
<h2 id="caveats" tabindex="-1">Caveats</h2>
<p>As with any set of data, this Third-Party Resource data comes with some caveats:</p>
<ul>
<li>All ResourceTiming data is subject to <a href="https://nicj.net/resourcetiming-visibility-third-party-scripts-ads-and-page-weight/">visibility concerns</a>:
<ul>
<li>Over 30% of requests are completely hidden from RUM (due to being in a cross-origin <code>IFRAME</code>)</li>
<li>Over 45% of requests don't have detailed timings or sizes (due to cross-origin restrictions and no <code>Timing-Allow-Origin</code> header)</li>
</ul>
</li>
<li>The mPulse Resources dataset is exactly that -- a reflection of mPulse customers, <strong>not</strong> of the entire internet</li>
<li>The mPulse data is <a href="/docs/tips/#data-is-sampled">sampled</a> and raw numbers (e.g. of fetches) should be only used for relative weighting</li>
<li>All of the other <a href="/docs/tips/">tips</a> we have on querying RUM Archive data apply</li>
</ul>
<h2 id="feedback-welcome" tabindex="-1">Feedback Welcome</h2>
<p>This is a brand new set of data we're making publicly available.  It may have errors, inconsistencies, quirks, etc.</p>
<p>We'd love to have web performance nerds take a look at the data and give us feedback.  Is it interesting?  Useful?  Does anything seem off?</p>
<p>Please open an <a href="https://github.com/rum-archive/rum-archive/issues">Issue in Github</a> with any feedback you have!</p>
<p>Thanks!</p>

        </div>
      </div>
    </div>
    <hr>
    <div class="content m-10 has-text-centered m-5"><a href="/blog/2023-11-01-rum-archive-insights/">&larr; RUM Insights</a><a href="/blog/2024-02-04-insights-from-the-rum-archive-robin-marx/">Insights from the RUM Archive &rarr;</a>
    </div>
  </div>
</article>

  </main>
  <footer class="footer">
    <div class="content has-text-centered">
      <p>
        Sponsored by <a href="https://akamai.com">Akamai</a>.
        The website content is licensed
        <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
      </p>
      <p>
        <a href="https://twitter.com/RUMArchive">twitter</a> -
        <a rel="me" href="https://webperf.social/@rumarchive">mastodon</a>
      </p>
    </div>
  </footer>
</body>
</html>
